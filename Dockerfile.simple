# Simplified single-stage Dockerfile for testing
FROM mcr.microsoft.com/dotnet/sdk:10.0
WORKDIR /app

# Copy project file
COPY API/UrlShortner.csproj ./

# Restore
RUN dotnet restore

# Copy source code
COPY API/ ./

# Publish
RUN dotnet publish UrlShortner.csproj -c Release -o out

# Run
EXPOSE 8080
ENV ASPNETCORE_ENVIRONMENT=Production
ENV ASPNETCORE_URLS=http://+:8080
ENTRYPOINT ["dotnet", "out/UrlShortner.dll"]
